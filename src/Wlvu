#!/bin/bash

# Set resource limits
ulimit -n 65535  # Increase file descriptor limit
ulimit -c unlimited  # Enable core dumps for debugging

# Set environment variables for stability
export ELECTRON_ENABLE_LOGGING=true
export ELECTRON_ENABLE_STACK_DUMPING=true
export NODE_OPTIONS="--max-old-space-size=8192"

# Clean any stale lock files
rm -f ~/.config/Cursor/Cache/*/LOCK
rm -f ~/.config/Cursor/SingletonLock
rm -f ~/.config/Cursor/SingletonCookie

# Launch Cursor with optimized settings
exec cursor "$@" --disable-gpu-vsync \
    --disable-software-rasterizer \
    --no-sandbox \
    --disable-dev-shm-usage \
    --disable-gpu-process-crash-limit 