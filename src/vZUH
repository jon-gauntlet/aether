#!/bin/bash

# Set optimization environment variables
export ELECTRON_ENABLE_LOGGING=1
export ELECTRON_NO_ATTACH_CONSOLE=1
export ELECTRON_NO_ASAR=1
export NODE_OPTIONS="--max-old-space-size=8192"

# Set resource limits
ulimit -n 524288 2>/dev/null  # File descriptors
ulimit -v 16777216 2>/dev/null  # Virtual memory (16GB)
ulimit -t unlimited 2>/dev/null  # CPU time
ulimit -m 16777216 2>/dev/null  # Max memory size
ulimit -l unlimited 2>/dev/null  # Max locked memory
ulimit -i 16384 2>/dev/null  # Pending signals

# Launch the actual Cursor binary
exec /usr/bin/cursor "$@"