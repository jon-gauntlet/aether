-- Drop and recreate RLS policies\ndrop policy if exists "Users can read messages in their channels" on messages;\ndrop policy if exists "Users can insert messages" on messages;\n\n-- Enable RLS\nalter table messages enable row level security;\n\n-- Create policy for reading messages\ncreate policy "Users can read messages in their channels"\n  on messages for select\n  to authenticated\n  using (true);\n\n-- Create policy for inserting messages\ncreate policy "Users can insert messages"\n  on messages for insert\n  to authenticated\n  with check (auth.uid()::text = user_id);
